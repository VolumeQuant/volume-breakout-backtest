# 한국 주식시장 거래량 폭발 백테스팅 프로젝트
## 최종 종합 보고서

**작성일**: 2026-01-29
**프로젝트 기간**: Phase 1 → Phase 2 → Phase 3 (3단계)
**데이터 범위**: 2021-2025년 (5년)
**핵심 질문**: "거래량이 터지면서 가격이 오른 종목, 과연 수익 낼 수 있는가?"

---

## 📊 Executive Summary

### 핵심 결론
**거래량 폭발 + 가격 상승만으로는 실전 매매 불가능**

- **최대 승률**: 48.4% (10번 중 5.2번 손실)
- **최대 MDD**: -98.33% (거의 파산 수준)
- **평균 수익률**: 2.5% (10일 보유)
- **테스트한 조합**: 300+ 가지

### 시사점
1. 거래량+가격은 **필요조건**이지만 **충분조건 아님**
2. 추가 필터 필수: 재무지표, 기술적 지표, 종목 품질
3. 손절/익절 로직이 오히려 독 (변동성 때문)
4. 수급 데이터도 알파 제공 못 함 (+0.15%p)

---

## 🎯 Phase 1: 탐색 단계

### 목적
거래량 폭발 현상 이해 및 기초 분석

### 주요 작업
1. **데이터 수집**
   - 주가 데이터: OHLCV
   - 투자자별 수급: 개인, 외국인, 금융투자, 연기금
   - 기간: 2021-2025년 (5년)

2. **거래량 폭발 정의**
   - VR (Volume Ratio) = 당일거래량 / 20일평균거래량
   - Z-Score = 통계적 이상치 측정

3. **수익률 계산**
   - Forward Return: 1D, 3D, 5D, 10D, 20D

### 핵심 발견
```
VR ≥ 3.0 조건:
- 발생 빈도: 연 3,154건
- 평균 수익률: 2.38% (20일)
- 승률: 44.8%
- MDD: -98.33%

→ "거래량만으로는 부족"
```

---

## ⚙️ Phase 2: 최적화 단계

### 목적
VR과 가격 상승률의 최적 조합 찾기

### 테스트한 조합
- **VR 임계치**: 2.0 ~ 8.0 (12가지)
- **Price 임계치**: 3% ~ 15% (8가지)
- **총 조합**: 96가지

### 결과
```
최적 조합: VR ≥ 6.5, Price ≥ 10%
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
IS (2021-2024):
  수익률: 3.24%
  승률: 48.4%
  MDD: -93.54%
  신호: 주 2.5개

→ 여전히 승률 50% 미달
→ MDD 거의 -100%
```

### 발견
- VR ↑ → 수익률 ↑, 신호 ↓
- Price ↑ → 수익률 ↑, 승률 ↓
- **트레이드오프 존재하지만 근본적 한계**

---

## 🏆 Phase 3: 검증 및 심층 분석

### Phase 3-1: 수급 필터 테스트

**목적**: 투자자별 수급으로 종목 필터링

**테스트한 전략**:
1. **Baseline**: VR≥3.0, Price≥5% (수급 조건 없음)
2. **Pension-SELL**: 연기금 3D SELL
3. **SS-Sniper**: 개인+금투 BUY, 외인+연기금 SELL (4개 조건)

**결과 (20일 보유)**:
```
Strategy          | IS 수익률 | IS 승률 | 신호/주
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Baseline          | 2.38%    | 44.8%  | 15.2개
Pension-SELL      | 2.53%    | 42.6%  |  2.9개 (+0.15%p)
SS-Sniper         | 3.30%    | 47.5%  |  0.3개 (+0.92%p)

→ 수급 필터의 알파 기여도 미미
→ 신호만 급감
```

**연도별 안정성 (SS-Sniper)**:
```
2021: -2.80% ❌
2022: -2.34% ❌
2023: +3.44% ✅
2024: +9.60% ✅
2025: +24.04% ✅ (12건만)

→ 5년 중 3년 양수 (60%)
→ 2025년 고수익은 작은 샘플 + 불마켓 착시
```

### Phase 3-2: VR × Price 상호작용

**목적**: VR과 Price의 조합 방식 최적화

**테스트한 방식**:
1. VR × Price (곱)
2. VR + Price (합)
3. w1×VR + w2×Price (가중합)
4. VR^a × Price^b (거듭제곱)

**최적 조합**:
```
VR + 2×Price ≥ 30 (가격에 2배 가중치)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
IS: 3.30% 수익률, 48.3% 승률
OOS: 6.39% 수익률, 50.8% 승률
신호: 주 5.1개

vs Baseline (VR≥3.0 AND Price≥10%):
  수익률: +0.81%p 개선
  승률: +1.0%p 개선
  MDD: -1.18%p 악화 (더 나빠짐)
```

**결론**: 조합 방식을 바꿔도 근본적 한계 돌파 못함

### Phase 3-3: 보유기간 최적화

**목적**: 1일, 3일, 5일, 10일, 20일 중 최적 보유기간 찾기

**결과 (VR≥3.0, Price≥10%)**:
```
보유기간 | IS 수익률 | IS 승률 | MDD      | Sharpe
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1일      | 0.67%    | 50.9%  | -99.48%  | 0.093
3일      | 1.22%    | 50.4%  | -99.16%  | 0.107
5일      | 1.76%    | 48.4%  | -99.24%  | 0.122
10일     | 2.49%    | 47.3%  | -98.33%  | 0.129
20일     | 3.78%    | 45.9%  | -99.48%  | 0.142

트레이드오프:
- 보유 ↑ → 수익률 ↑, 승률 ↓
- 짧은 보유: 안정적이지만 작은 수익
- 긴 보유: 큰 수익이지만 변동성 증가
```

### Phase 3-4: 승패 구조 분석

**목적**: 승률 50% 미달인 이유 파악

**10일 보유 승패 구조 (IS)**:
```
거래 건수: 1,245건
승리: 589건 (47.3%)
패배: 656건 (52.7%)

평균 승리: +16.67%
평균 패배: -10.23%
Win/Loss Ratio: 1.63배

최대 승리: +203.6% 🚀
최대 패배: -43.8% 💀

→ 전형적인 트렌드 추종 구조
→ 대부분 손실이지만 가끔 대박
```

**손익분기 승률**:
```
Win/Loss Ratio = 1.63배
손익분기 승률 = 1/(1+1.63) = 38.0%

실제 승률 47.3% > 38.0% → 수익 가능
하지만 정신적 부담 큼 (10번 중 5번 손실)
```

### Phase 3-5: 손절/익절 전략 테스트

**목적**: MDD -98% 개선 시도

**테스트한 전략**:
1. Baseline: 10일 무조건 보유
2. Trailing Stop: 최고점 대비 -5%, -7%, -10%, -15%
3. Stop Loss Only: -3%, -5%, -7%, -10%
4. Trailing + Take Profit: 조합

**충격적 결과**:
```
Strategy            | IS 수익률 | IS 승률 | MDD      | 평균보유
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Baseline            | 2.49%    | 47.3%  | -98.33%  | 10.0일
Trailing -5%        | 1.25%    | 46.0%  | -63.30%  |  1.3일 ❌
Trailing -10%       | ...      | ...    | ...      | ...
Stop Loss -3%       | 1.69%    | 19.4%  | -82.80%  |  3.6일 💀
Stop Loss -10%      | 2.37%    | 42.3%  | -95.16%  |  7.6일

→ 손절이 오히려 독!
→ Baseline(아무것도 안 함)이 최고
```

**왜 손절이 실패했나?**
```
거래량 폭발 = 극단적 변동성

패턴:
Day 1: +10% (거래량 폭발 진입)
Day 2: -7% (정상 조정) → 손절 발동 💀
Day 3~10: +20% (실제 상승) → 이미 청산되어 못 먹음

→ ±10-15% 흔들림이 정상
→ -3% 손절 = 노이즈에 걸림
→ 승률 19.4% 폭락
```

---

## 💡 핵심 발견사항

### 1. 거래량+가격의 한계

**300+ 조합 테스트 결과**:
- 최고 승률: 48.4% (50% 돌파 실패)
- 최저 MDD: -63.30% (여전히 파산급)
- 평균 수익률: 2-3% (수수료/세금 고려 시 더 적음)

**결론**: 거래량과 가격만으로는 **필터링 불가능**

### 2. 수급 데이터의 무용성

```
Pension-SELL: +0.15%p 개선 (거의 없음)
SS-Sniper: +0.92%p 개선 (미미)

→ 신호만 급감 (주 15개 → 주 0.3개)
→ 실전 사용 불가
```

### 3. 손절의 역설

**변동성 환경에서 손절 = 독**
- 거래량 폭발 직후 ±10-15% 흔들림 정상
- 손절 → 노이즈에 걸려 승률 급락
- Hold and Pray가 최선 (정신력 필요)

### 4. 트렌드 추종 구조

```
손실: 자주 발생 (52.7%), 작음 (-10%)
이익: 드물게 발생 (47.3%), 큼 (+17%)
대박: 매우 드물지만 +200%

→ 대부분 지루하게 잃다가 가끔 대박
→ 정신적 부담 극심
```

---

## ❌ 실전 적용 불가 이유

### 1. 낮은 승률 (47-48%)
- 10번 거래 → 5.2번 손실
- 연속 손실 시 멘탈 붕괴 가능성

### 2. 극단적 MDD (-98%)
- 최악의 경우 계좌의 98% 증발
- 실전 자금관리로 견디기 어려움

### 3. 수익률 vs 리스크 불균형
```
10일 보유: 2.49% 기대수익
최대 손실: -43.8%

→ Risk/Reward = 17.6배 불리
```

### 4. 수수료/세금 미고려
```
백테스팅 수익률: 2.49%
실전 수수료: 0.015% × 2 (매수/매도)
실전 세금: 0.23% (매도 시)

실제 수익률: 2.49% - 0.26% = 2.23%

→ 연 수익률 약 70% (10일×26회)
→ 하지만 MDD -98%로 파산 위험
```

### 5. 슬리피지 (Slippage)
- 거래량 폭발 종목 = 호가 스프레드 넓음
- 백테스팅은 종가 기준, 실전은 체결가
- 실제 수익률 추가 하락 예상

---

## 📈 데이터로 본 Phase별 진화

### Phase 1 → Phase 2
```
개선: VR 3.0 → 6.5, Price 5% → 10%
결과: 수익률 2.38% → 3.24% (+0.86%p)
      승률 44.8% → 48.4% (+3.6%p)
      신호 주 15개 → 주 2.5개

평가: 개선되었지만 여전히 실전 불가
```

### Phase 2 → Phase 3
```
시도: 수급, 상호작용, 손절
결과: 수익률 3.24% → 3.30% (+0.06%p)
      승률 48.4% → 48.3% (변화 없음)
      MDD 개선 실패

평가: 근본적 한계 확인
```

---

## 🔍 "거래량 폭발"의 진실

### 거래량이 터지는 이유

**상승 신호 (소수)**:
- ✅ 기관 매집
- ✅ 호재 공시
- ✅ 기술적 돌파

**하락/함정 신호 (다수)**:
- ❌ 기관 분산 매도
- ❌ 테마주 펌핑 후 덤핑
- ❌ 악재 폭탄 (공포 매도)
- ❌ 손절 물량 패닉
- ❌ 작전 세력 청산

**결론**: "거래량 폭발" ≠ "수익 기회"

### 승률 47%의 의미

```
100개 거래량 폭발 종목:
├─ 47개: 상승 (평균 +16.67%)
├─ 53개: 하락 (평균 -10.23%)
└─ 결과: 평균 +2.49% (간신히 플러스)

→ 반은 함정
→ 구별 불가능 (현재 필터로는)
```

---

## 🎓 학습한 교훈

### 1. 백테스팅의 함정
- **OOS 과적합**: 2025년만 좋아 보임
- **작은 샘플**: 12건으로 24% 수익 → 착시
- **생존 편향**: 상장폐지 종목 미포함

### 2. 단순함의 승리
- 복잡한 수급 조합 < Baseline
- 정교한 손절 < 무작정 보유
- 96가지 VR/Price 조합 → 결국 비슷비슷

### 3. 변동성의 양면성
```
거래량 폭발 = 변동성 폭발

장점: 큰 수익 가능 (+200%)
단점: 손절 로직 무용화, MDD -98%
```

### 4. 필요조건 vs 충분조건
```
거래량 터짐 + 가격 상승 = 필요조건 ✅
→ "이 정도면 봐줄 만한 종목"

하지만 충분조건 아님 ❌
→ "이것만으로는 수익 못 냄"
```

---

## 🚀 Phase 4 방향성 제안

### Option 1: 종목 품질 필터 추가

**재무 건전성**:
- 부채비율 < 100%
- ROE > 10%
- 영업이익률 > 5%

**시장 지표**:
- 시가총액 > 1,000억
- 일평균 거래대금 > 100억
- 상장 후 3년 이상

**업종 필터**:
- 제외: 바이오, 테마주, 스팩
- 우선: 제조업, IT, 소비재

**기술적 지표**:
- 20일/60일 이평선 정배열
- RSI 30-70 범위
- 볼린저밴드 위치

### Option 2: 자금관리 + 포트폴리오

**켈리 공식 적용**:
```
승률: 47.3%
Win/Loss: 1.63배

최적 베팅: 약 8%
안전 베팅: 2-3% (1/4 Kelly)
```

**분산 투자**:
- 20종목 동시 보유
- 1종목당 2% 투자
- 1종목 -100% 되어도 총 -2%

**리밸런싱**:
- 주 1회 신호 확인
- 10일 보유 후 청산
- 롤링 포트폴리오

### Option 3: 머신러닝 접근

**Feature Engineering**:
- 거래량 패턴 (20일 이동평균, 표준편차)
- 가격 패턴 (캔들 패턴, 추세)
- 수급 패턴 (3D, 5D, 10D 누적)
- 재무 비율 (30개)
- 기술적 지표 (RSI, MACD, 볼린저 등 20개)
- 뉴스/공시 감성 분석

**모델**:
- Random Forest
- XGBoost
- Neural Network

**목표**:
- 승률 55% 이상
- MDD -50% 이하

### Option 4: 현실적 접근

**전략 수용**:
- 승률 47% 받아들임
- MDD -98% 인정
- 단, 자금관리로 극복

**자금 배분**:
```
전체 자금: 1억
거래량 전략: 1,000만 (10%)
나머지: 안전자산

→ 최악의 경우 -980만 손실
→ 전체 포트폴리오 -9.8% 타격
```

**심리적 준비**:
- 10번 중 5번 손실 각오
- 연속 손실 견디기
- 대박 나올 때까지 참기

---

## 📊 핵심 지표 Summary

### 전체 테스트 규모
- **조합 수**: 300+ 가지
- **데이터 기간**: 5년 (2021-2025)
- **신호 수**: IS 1,245건, OOS 519건
- **분석 파일**: 15개 Python 스크립트

### Best Case (모든 최적화 적용)
```
전략: VR + 2×Price ≥ 30
보유: 10일
수익률: 3.30% (IS), 6.39% (OOS)
승률: 48.3%
MDD: -99.51%
Sharpe: 0.149

→ 여전히 실전 불가
```

### Worst Case
```
전략: Trailing Stop -5% + Take Profit 25%
수익률: -0.23% (IS)
승률: 37.8%
MDD: -99.98%

→ 마이너스 수익
```

### Realistic Case (Baseline)
```
전략: VR≥3.0, Price≥10%, 10일 보유
수익률: 2.49% (IS), 5.86% (OOS)
승률: 47.3%
MDD: -98.33%
Sharpe: 0.129

→ 가장 단순한 전략이 최선
```

---

## 💼 실전 적용 체크리스트

### ✅ 충족 조건
- [x] 백테스팅 완료
- [x] IS/OOS 검증
- [x] 연도별 안정성 확인
- [x] 다양한 조합 테스트

### ❌ 미충족 조건 (치명적)
- [ ] 승률 50% 이상
- [ ] MDD -30% 이하
- [ ] 연간 수익률 15% 이상
- [ ] Sharpe Ratio 1.0 이상
- [ ] 종목 품질 필터
- [ ] 수수료/세금/슬리피지 고려
- [ ] 리스크 관리 프레임워크

### 🚨 위험 신호
1. MDD -98% = 자금 증발 위험
2. 승률 47% = 정신적 압박
3. 수익률 2.5% = 수수료 후 미미
4. 변동성 극심 = 손절 불가능

---

## 📝 다음 단계 토론 주제

### Claude Chat 상담 주제

**1. 전략 방향성**
```
Q1: 거래량+가격 전략을 버려야 하나?
Q2: 아니면 추가 필터로 보완 가능한가?
Q3: 승률 47%로도 수익 낼 방법은?
```

**2. 종목 필터링**
```
Q4: 재무지표 필터링 효과는?
Q5: 기술적 지표 조합은?
Q6: 업종/시총 필터는 얼마나 도움 되나?
```

**3. 리스크 관리**
```
Q7: MDD -98% 줄이는 방법은?
Q8: 켈리 공식 vs 고정 배팅?
Q9: 포트폴리오 분산이 답인가?
```

**4. 현실적 접근**
```
Q10: 이 전략으로 실전 가능한가?
Q11: 자금 얼마까지 투입 가능한가?
Q12: 다른 전략과 조합해야 하나?
```

**5. 대안 모색**
```
Q13: 머신러닝으로 돌파구 가능한가?
Q14: 완전히 다른 접근법은?
Q15: 이 프로젝트를 어떻게 마무리할까?
```

---

## 📂 생성된 파일 목록

### 분석 스크립트 (src/phase3/)
```
p3_01_*.py ~ p3_15_*.py (15개 파일)

주요 파일:
- p3_08_baseline_vs_flow_filters.py: 수급 필터 비교
- p3_12_vr_price_sweet_spot.py: VR×Price 최적화
- p3_13_vr_price_interaction.py: 상호작용 분석
- p3_14_exit_strategy.py: 손절/익절 전략
- p3_15_exit_parameter_scan.py: 손절 파라미터 스캔
```

### 결과 파일 (results/p3/)
```
p3_01_*.csv ~ p3_15_*.csv (30+ 개 파일)

주요 결과:
- p3_08_baseline_vs_flow_filters.csv
- p3_12_vr_price_sweet_spot.csv
- p3_13_vr_price_interaction.csv
- p3_15_exit_parameter_scan.csv
```

### 문서
```
- README.md: 프로젝트 개요
- SESSION_HANDOFF.md: 세션 인계 문서
- PROGRESS_2026_01_28.md: 진행 상황
- RESULTS_SUMMARY.md: 결과 요약
- PROJECT_FINAL_SUMMARY.md: 이 문서
```

---

## 🎯 프로젝트 가치

### 긍정적 성과
1. **체계적 검증**: 300+ 조합 테스트
2. **명확한 한계 확인**: 거래량+가격만으로는 부족
3. **학습 자료**: 다음 프로젝트의 시행착오 방지
4. **코드 자산**: 재사용 가능한 백테스팅 프레임워크

### 한계
1. **실전 불가**: 승률 47%, MDD -98%
2. **추가 작업 필요**: 종목 필터, 리스크 관리
3. **높은 진입장벽**: 정신력, 자금력 요구

### 최종 평가
```
학습 가치: ★★★★★ (5/5)
실전 가치: ★☆☆☆☆ (1/5)
```

**결론**: 훌륭한 시행착오 프로젝트. 하지만 실전 매매를 위해서는 **Phase 4 필수**.

---

## 🔚 맺음말

**"거래량이 터지면서 가격이 오른 종목, 과연 수익 낼 수 있는가?"**

**답**: 거래량과 가격만으로는 **불가능**.

추가 필터, 리스크 관리, 포트폴리오 분산이 필수. 또는 이 전략을 보조 전략으로만 사용하고 메인 전략은 다른 것을 선택해야 함.

하지만 이 프로젝트는 **"왜 안 되는지"**를 명확히 밝힌 의미 있는 작업.

다음 단계는 Claude Chat과 상담하여 결정하세요.

---

**작성자**: Claude Sonnet 4.5
**프로젝트 기간**: 2021-2025 데이터 분석
**최종 업데이트**: 2026-01-29
