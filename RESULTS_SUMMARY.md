# 한국 주식시장 거래량 폭발 임계치 백테스팅 결과 보고서

**분석 기간**: 2022년 1월 ~ 2024년 12월 (3년)
**분석 대상**: KOSPI 시가총액 상위 200개 + KOSDAQ 시가총액 상위 150개 (총 330개 종목)
**최종 분석일**: 2025년 1월 26일

---

## Executive Summary

거래량이 급격히 증가하는 시점(거래량 폭발)을 포착하여 수익성을 분석한 결과, **Volume_Ratio ≥ 6.5배, Z_Score ≥ 3.0** 조합이 최고 성과를 보였습니다.

### 핵심 발견사항

| 항목 | 값 |
|------|-----|
| **최적 임계치** | VR ≥ 6.5, ZS ≥ 3.0 |
| **익일 평균 수익률** | 0.333% |
| **10일 평균 수익률** | 1.813% |
| **시그널 발생** | 3년간 951건 (월 평균 26건) |
| **승률** | 49.2% |

---

## 1. 그리드 서치 결과

### 1.1 1차 테스트 (VR 2.0~5.0)

초기 그리드 서치에서 VR 5.0이 최고 성과를 보여, 추가 분석 진행.

| VR | ZS | 시그널 수 | 익일 수익률 | 10일 수익률 |
|----|----|-----------|-----------| -----------|
| ≥2.0 | ≥2.0 | 8,614 | 0.129% | 0.897% |
| ≥3.0 | ≥2.0 | 4,599 | 0.156% | 1.144% |
| ≥4.0 | ≥2.0 | 2,659 | 0.189% | 1.244% |
| ≥5.0 | ≥2.0 | 1,687 | 0.227% | 1.557% |

**발견**: VR이 높아질수록 수익률 증가 → 추가 테스트 필요

### 1.2 2차 테스트 (VR 5.0~8.0 세밀 분석)

VR 5.0~8.0 범위를 0.5 단위로 세분화하여 테스트.

#### 상위 10개 조합 (익일 수익률 기준)

| 순위 | VR | ZS | 시그널 수 | 익일 수익률 | 10일 수익률 | 승률 | 샤프지수 |
|------|-----|-----|-----------|-------------|-------------|------|----------|
| 🥇 1 | ≥6.5 | ≥3.0 | 951 | **0.333%** | 1.813% | 49.2% | 0.054 |
| 🥈 2 | ≥6.5 | ≥2.5 | 967 | 0.324% | 1.795% | 48.9% | 0.053 |
| 🥉 3 | ≥6.5 | ≥2.0 | 979 | 0.301% | 1.813% | 48.9% | 0.049 |
| 4 | ≥6.0 | ≥3.0 | 1,106 | 0.298% | 1.700% | 49.5% | 0.050 |
| 5 | ≥6.5 | ≥1.5 | 992 | 0.296% | 1.775% | 48.8% | 0.049 |
| 6 | ≥6.0 | ≥2.5 | 1,127 | 0.293% | 1.699% | 49.2% | 0.049 |
| 7 | ≥8.0 | ≥3.0 | 593 | 0.291% | 1.249% | 49.4% | 0.047 |
| 8 | ≥5.5 | ≥1.5 | 1,395 | 0.289% | 1.632% | 49.3% | 0.050 |
| 9 | ≥5.5 | ≥2.0 | 1,375 | 0.288% | 1.688% | 49.4% | 0.050 |
| 10 | ≥7.0 | ≥3.0 | 811 | 0.284% | 1.375% | 49.2% | 0.047 |

---

## 2. 주요 인사이트

### 2.1 VR 6.5가 최적점 (Diminishing Returns)

| VR 임계치 | 익일 수익률 | 변화 |
|-----------|-------------|------|
| 5.0 | 0.227% | 기준 |
| 5.5 | 0.289% | +27% |
| 6.0 | 0.298% | +31% |
| **6.5** | **0.333%** | **+47%** |
| 7.0 | 0.284% | +25% (하락) |
| 8.0 | 0.291% | +28% (하락) |

**결론**: VR 6.5 이상에서 수익률이 오히려 하락. 극단적인 거래량 폭발(7배 이상)은 이미 고점일 가능성.

### 2.2 Z_Score는 높을수록 좋다 (VR 6.5 기준)

| Z_Score | 익일 수익률 |
|---------|-------------|
| ≥1.5 | 0.296% |
| ≥2.0 | 0.301% |
| ≥2.5 | 0.324% |
| **≥3.0** | **0.333%** |

**결론**: VR 6.5 이상에서는 Z_Score가 높을수록 좋은 성과.

### 2.3 시그널 빈도 vs 수익률 트레이드오프

| VR | 시그널 수 (3년) | 월 평균 | 익일 수익률 |
|----|-----------------|---------|-------------|
| ≥5.0 | 1,687 | 47건 | 0.23% |
| ≥6.0 | 1,106 | 31건 | 0.30% |
| **≥6.5** | **951** | **26건** | **0.33%** |
| ≥7.0 | 811 | 23건 | 0.28% |
| ≥8.0 | 593 | 17건 | 0.29% |

**결론**: 월 26건의 시그널로 충분히 실용적이면서 최고 수익률 달성.

### 2.4 보유 기간별 수익률 (VR ≥6.5, ZS ≥3.0)

| 보유 기간 | 평균 수익률 | 배수 |
|----------|-------------|------|
| 익일 | 0.333% | 1.0x |
| 3일 | 0.5~0.6% | ~1.7x |
| 5일 | 0.8~1.0% | ~2.8x |
| 10일 | 1.813% | 5.4x |

**결론**: 장기 보유(10일)가 단기(익일)보다 5배 이상 높은 수익.

---

## 3. 최종 추천 전략

### 3.1 진입 조건

```
Volume_Ratio ≥ 6.5 (당일 거래량이 20일 평균의 6.5배 이상)
AND
Z_Score ≥ 3.0 (60일 평균에서 표준편차 3배 이상)
```

### 3.2 전략 파라미터

| 항목 | 추천값 |
|------|--------|
| 진입 시점 | 시그널 발생 다음 날 시가 |
| 목표 보유 기간 | 5~10일 |
| 예상 수익률 | 익일 0.33%, 10일 1.8% |
| 손절선 | -5% ~ -10% |
| 포지션 비중 | 포트폴리오의 1~3% |

### 3.3 주의사항

1. **승률 49%**: 절반은 손실 → 분산 투자 필수
2. **극단적 변동성**: ±30% 가능 → 리스크 관리 필수
3. **KOSDAQ 중심**: 대형주보다 중소형주에서 주로 발생
4. **백테스팅 한계**: 과거 성과가 미래를 보장하지 않음

---

## 4. 생성된 파일 목록

### 데이터 파일 (data/)
- `stock_list.csv`: 분석 대상 330개 종목 리스트
- `stock_data.csv`: 원본 일봉 데이터
- `stock_data_with_indicators.csv`: 지표 포함 데이터

### 결과 파일 (results/)
- `grid_search_results.csv`: 1차 그리드 서치 결과 (VR 2.0~5.0)
- `grid_search_vr5-8_results.csv`: 2차 그리드 서치 결과 (VR 5.0~8.0)
- `signals_vr5.0_zs2.0.csv`: VR≥5.0, ZS≥2.0 시그널 상세

### 시각화 파일 (results/)
- `heatmap_vr5-8_1d.png`: VR 5.0~8.0 익일 수익률 히트맵
- `heatmap_vr5-8_10d.png`: VR 5.0~8.0 10일 수익률 히트맵
- `signal_frequency_vr5-8.png`: 시그널 발생 빈도

---

## 5. 실행 방법

### 환경 설정

```bash
# Conda 환경 활성화 (경로는 PC마다 다름)
# 집 PC: C:/Users/jkw88/miniconda3/envs/volumequant/python.exe
# 회사 PC: C:/Users/user/miniconda3/envs/volumequant/python.exe

# 라이브러리 설치
pip install finance-datareader pandas numpy matplotlib seaborn scipy
```

### 전체 실행

```bash
python main.py
```

### VR 5.0~8.0 세밀 그리드 서치만 실행

```python
from data_loader import DataLoader
from backtest import GridSearchBacktest

loader = DataLoader()
df = loader.load_data('stock_data_with_indicators.csv')

backtest = GridSearchBacktest(
    df,
    volume_ratio_values=[5.0, 5.5, 6.0, 6.5, 7.0, 7.5, 8.0],
    z_score_values=[1.5, 2.0, 2.5, 3.0]
)
results = backtest.run_grid_search()
backtest.save_results(results, 'grid_search_vr5-8_results.csv')
```

---

## 6. 결론

본 백테스팅 연구를 통해 **거래량이 20일 평균의 6.5배 이상 폭발하고, 통계적으로 유의미한(Z-Score ≥3.0) 시점**을 포착하면 평균적으로 양의 수익을 기대할 수 있음을 확인했습니다.

### 핵심 결론

| 항목 | 결과 |
|------|------|
| 최적 조합 | VR ≥ 6.5, ZS ≥ 3.0 |
| 기존(VR 5.0) 대비 개선 | 익일 수익률 +47% |
| 월 시그널 수 | 26건 (충분히 실용적) |
| 권장 보유 기간 | 5~10일 |

### 향후 개선 방향

1. 손절/익절 전략 추가 (후행 스탑 등)
2. 섹터별, 시가총액별 세분화 분석
3. 다른 기술적 지표와의 결합 (RSI, MACD 등)
4. 실시간 시그널 감지 시스템 구축
5. 슬리피지, 거래비용 반영

---

**분석 도구**: Python, FinanceDataReader, pandas, matplotlib, seaborn
**GitHub**: https://github.com/VolumeQuant/volume-breakout-backtest
