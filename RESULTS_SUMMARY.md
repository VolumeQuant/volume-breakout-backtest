# 한국 주식시장 거래량 폭발 백테스팅 결과 보고서

**분석 기간**: 2022년 1월 ~ 2024년 12월 (In-Sample) + 2025년 (Out-of-Sample)
**분석 대상**: KOSPI 시가총액 상위 200개 + KOSDAQ 시가총액 상위 150개 (총 350개 종목)
**최종 분석일**: 2026년 1월 28일

---

## Executive Summary

거래량 폭발 시점을 포착하고, 가격 필터와 수급 필터를 단계적으로 추가하여 최적의 매매 전략을 도출했습니다.

### 최종 추천 전략

```
진입 조건:
  Volume_Ratio ≥ 6.5 (당일 거래량이 20일 평균의 6.5배 이상)
  AND Z_Score ≥ 3.0 (60일 평균에서 표준편차 3배 이상)
  AND 당일 수익률 ≥ 10% (시가 대비 종가)
  AND 개인 순매도 (< 0)
  AND 연기금 순매도 (< 0)
```

### 핵심 성과 지표

| 항목 | 값 |
|------|-----|
| **1일 평균 수익률** | 1.91% |
| **10일 평균 수익률** | 3.85% |
| **1일 승률** | 59.7% |
| **10일 손익비** | 2.25 |
| **월 시그널** | 2~3건 |
| **기본 전략 대비 개선** | +479% |

---

## 단계별 분석 결과

### Stage 1: 거래량 임계치 최적화

VR(Volume Ratio)과 ZS(Z-Score) 임계치를 그리드 서치하여 최적값 탐색.

| VR | ZS | 시그널 | 1일 수익률 | 10일 수익률 |
|----|----|---------:|----------:|----------:|
| ≥2.0 | ≥2.0 | 8,614 | 0.13% | 0.90% |
| ≥3.0 | ≥2.0 | 4,599 | 0.16% | 1.14% |
| ≥5.0 | ≥2.0 | 1,687 | 0.23% | 1.56% |
| **≥6.5** | **≥3.0** | **951** | **0.33%** | **1.81%** |
| ≥7.0 | ≥3.0 | 811 | 0.28% | 1.38% |

**결론**: VR 6.5, ZS 3.0이 최적. VR 7.0 이상은 오히려 수익률 하락 (이미 고점).

---

### Stage 2: 가격 필터 추가

당일 가격 상승률 조건을 추가하여 시그널 품질 향상.

| 조건 | 시그널 | 1일 수익률 | 승률 | Stage 1 대비 |
|------|-------:|----------:|-----:|------------:|
| Stage 1 (VR≥6.5, ZS≥3.0) | 951 | 0.33% | 49.2% | 기준 |
| **+ 당일 ≥10%** | **373** | **0.87%** | **52.5%** | **+164%** |
| + 당일 ≥15% | 146 | 0.68% | 50.7% | +106% |

**결론**: 당일 10% 이상 상승 필터 추가 시 수익률 2.6배 개선. 15%는 과도한 필터링.

---

### Stage 3-1: 수급 주체별 단독 필터

투자자 유형별 순매수/순매도 필터의 단독 효과 검증.

**기준**: VR≥6.5 + ZS≥3.0 + 당일≥10%

| 필터 | 시그널 | 1일 수익률 | Alpha | 승률 | 손익비 |
|------|-------:|----------:|------:|-----:|-------:|
| Baseline (필터없음) | 373 | 0.87% | - | 52.5% | 1.20 |
| **금융투자 순매수** | 184 | **1.53%** | **+75%** | 52.2% | 1.51 |
| 연기금 순매수 | 186 | 0.51% | -42% | 51.1% | 1.12 |
| 개인 순매도 | 234 | 0.98% | +13% | 53.0% | 1.31 |

**핵심 발견**:
- 금융투자(증권사) 순매수가 가장 효과적 (+75% Alpha)
- 연기금 순매수는 오히려 역효과 (-42% Alpha)
- 연기금 대량 매수(>50억)는 수익률 -3.6% → 고점 신호

---

### Stage 3-2: 조합 필터 + 보유 기간별 분석

수급 필터 조합과 보유 기간(1일/3일/5일/10일)별 최적 전략 탐색.

#### 조합 필터 성과 비교

| 조합 | 시그널 | 1일 | 3일 | 5일 | 10일 |
|------|-------:|----:|----:|----:|-----:|
| Baseline | 373 | 0.87% | 1.05% | 1.89% | 2.58% |
| 금융투자(+) | 184 | 1.53% | 1.64% | 2.93% | 2.49% |
| 개인(-) | 234 | 0.98% | 0.97% | 2.05% | 2.08% |
| 금융투자(+) + 개인(-) | 134 | 1.20% | 0.83% | 2.46% | 1.64% |
| **개인(-) + 연기금(-)** | **62** | **1.91%** | 1.00% | 2.35% | **3.85%** |
| 금융투자(+) + 연기금(-) | 52 | 1.01% | 0.87% | 2.09% | 3.42% |
| 금융투자(+) + 개인(-) + 연기금(-) | 34 | 1.17% | 0.51% | 2.53% | 3.51% |

#### 보유 기간별 최적 조합

| 보유 기간 | 최적 조합 | 수익률 | Alpha | 승률 | 손익비 | 월 시그널 |
|-----------|-----------|-------:|------:|-----:|-------:|----------:|
| **1일** | 개인(-) + 연기금(-) | **1.91%** | +119% | 59.7% | 1.57 | 2.6건 |
| 3일 | 금융투자(+) 단독 | 1.64% | +56% | 51.9% | 1.38 | 5.9건 |
| 5일 | 금융투자(+) 단독 | 2.93% | +55% | 51.9% | 1.57 | 5.9건 |
| **10일** | 개인(-) + 연기금(-) | **3.85%** | +49% | 43.3% | **2.25** | 2.6건 |

---

### Stage 3-3: 민감도 분석 및 매집 가설 검증

#### 거래량 임계치 민감도 (빈도 vs 수익률 Trade-off)

| Case | VR | ZS | 시그널 | 월평균 | 1일 수익률 | 10일 수익률 | 10일 승률 |
|------|----|----|-------:|-------:|-----------:|------------:|----------:|
| Baseline | 6.5 | 3.0 | 62 | 2.6건 | 1.91% | 3.85% | 43.3% |
| **Case A** | 5.0 | 2.5 | 101 | 3.5건 | 1.26% | 5.02% | 49.5% |
| **Case B** | 4.0 | 2.0 | 130 | 4.3건 | 0.90% | **5.70%** | **53.2%** |

**발견**: 임계치를 낮추면 빈도↑, 1일 수익률↓, 하지만 **10일 수익률과 승률은 오히려 개선**

#### 5일 매집 + 당일 돌파 가설: ❌ 기각

| 조건 | 시그널 | 1일 | 10일 | 승률(10일) |
|------|-------:|----:|-----:|-----------:|
| 기존: 당일 개인(-)+연기금(-) | 62 | 1.91% | 3.85% | 43.3% |
| 신규: 5일 기관 누적(+) | 204 | 0.40% | 1.84% | 43.8% |
| 신규: 5일 기관(+)+당일 개인(-) | 136 | 0.65% | 0.62% | 44.0% |

**결론**: "매집 후 돌파"보다 **"당일 스마트머니 동반"이 더 유효**

#### 연기금 역할: 시가총액별 차이

| 구분 | 연기금 매수 (10일) | 연기금 매도 (10일) |
|------|------------------:|------------------:|
| **대형주 (상위 100)** | -0.40% | **6.12%** ✅ |
| 중소형주 (하위 250) | 2.74% | 1.53% |

**핵심**: 대형주에서 연기금 매도 = **강력한 양의 시그널 (6.12%)**

---

### Stage 3-4: 기관 수급 집중도(Inst_Ratio) 분석

**Inst_Ratio**: 기관 순매수(금융투자+연기금) / 당일 거래대금 × 100

#### 임계치별 성과

| 임계치 | 시그널 | 월평균 | 1일 수익률 | 10일 수익률 | 10일 승률 |
|--------|-------:|-------:|-----------:|------------:|----------:|
| 수급 무관 | 373 | 11.7건 | 0.87% | 2.58% | 45.8% |
| > 0% | 225 | 7.0건 | 0.91% | 1.36% | 45.5% |
| **≥ 3%** | **33** | **1.8건** | **3.58%** | **4.37%** | **60.6%** ✅ |
| ≥ 5% | 15 | 1.4건 | 1.26% | -1.23% | 53.3% |
| ≥ 10% | 4 | 1.0건 | -0.92% | 2.54% | 75.0% |

**Sweet Spot: Inst_Ratio ≥ 3%**
- 시그널 33개, 승률 60.6%, 10일 수익률 4.37%
- 기관이 거래대금의 3% 이상을 순매수할 때 가장 유효

---

### Stage 4-1: Out-of-Sample (2025년) 검증

In-Sample(2022-2024)에서 도출한 전략을 2025년 데이터로 독립 검증.

#### In-Sample vs OOS 성과 비교

| 지표 | In-Sample (22-24) | OOS (2025) | 변화 |
|------|------------------:|-----------:|-----:|
| 시그널 수 | 62 | 13 | - |
| 월평균 시그널 | 2.6건 | 2.6건 | 동일 |
| **1일 수익률** | 1.91% | **-0.61%** | ⚠️ -132% |
| **10일 수익률** | 3.85% | **5.96%** | ✅ +55% |
| 1일 승률 | 59.7% | 38.5% | -21%p |
| 10일 승률 | 43.3% | 41.7% | -1.7%p |
| 10일 손익비 | 2.25 | 2.93 | +30% |

#### 연도별 추세 (Alpha Decay 확인)

| 연도 | 시그널 | 1일 수익률 | 1일 승률 | 10일 수익률 |
|------|-------:|-----------:|---------:|------------:|
| 2022 | 9 | 3.83% | 66.7% | 5.61% |
| 2023 | 28 | 2.20% | 67.9% | 5.82% |
| 2024 | 25 | 0.89% | 48.0% | 0.75% |
| 2025 | 13 | -0.61% | 38.5% | 5.96% |

**결론: 전략은 2025년에 부분적으로 유효**
- ❌ 단기(1일): Alpha Decay 심각, 수익률 음수 전환
- ✅ 중기(10일): 오히려 수익률 개선 (5.96%), 손익비 2.93 유지
- **권장**: 보유 기간을 **10일**로 설정하면 2025년에도 유효

---

## 수익률 개선 히스토리

| 단계 | 조건 | 1일 수익률 | 누적 개선 |
|------|------|----------:|---------:|
| Stage 1 | VR≥6.5, ZS≥3.0 | 0.33% | 기준 |
| Stage 2 | + 당일≥10% | 0.87% | +164% |
| Stage 3-1 | + 금융투자(+) | 1.53% | +364% |
| **Stage 3-2** | + 개인(-) + 연기금(-) | **1.91%** | **+479%** |

---

## 주요 인사이트

### 1. 연기금 역설

> "연기금이 사면 우상향한다"는 통념과 달리, **거래량 폭발 + 급등** 상황에서 연기금 매수는 역효과.

| 연기금 순매수 금액 | 시그널 | 1일 수익률 | 10일 수익률 |
|-------------------|-------:|----------:|----------:|
| > 0억 | 186 | 0.51% | 2.27% |
| > 10억 | 78 | -0.38% | -1.80% |
| > 50억 | 21 | **-0.94%** | **-3.59%** |

**해석**: 연기금은 저점 분할 매수 전략 사용. 급등 종목에서 대량 매수 = 이미 고점 근처.

### 2. 스마트머니 시그널

**최강 시그널**: 개인(-) + 연기금(-) = 금융투자(증권사)가 단독으로 매집 중

- 개인도 팔고 연기금도 파는데 주가가 오른다?
- → 금융투자가 강하게 쓸어담는 중
- → 추가 상승 여력 큼

### 3. 외국인은 노이즈

- 금융투자(+) + 외국인(+) 조합: 1일 0.55% (베이스라인보다 낮음)
- 외국인 수급은 예측력 낮거나 후행성 있음

---

## 전략별 추천 (2025년 OOS 검증 반영)

| 전략 유형 | 조합 | 예상 수익 | 월 시그널 | OOS 검증 | 특징 |
|-----------|------|-----------|-----------|----------|------|
| ~~단타 (1일)~~ | 개인(-) + 연기금(-) | ~~1.9%~~ | 2.6건 | ❌ 음수 전환 | 2025년 이후 비추천 |
| **스윙 (3~5일)** | 금융투자(+) 단독 | 1.6~2.9% | 5.9건 | ⚠️ 미검증 | 균형잡힌 선택 |
| **중기 (10일)** | 개인(-) + 연기금(-) | **5.96%** | 2.6건 | ✅ 유효 | **최고 권장**, 손익비 2.93 |
| **고승률** | Inst_Ratio ≥ 3% | 4.37% | 1.8건 | ⚠️ 미검증 | 승률 60.6% |

---

## 실행 방법

### 환경 설정

```bash
# Conda 환경 활성화
# 집 PC: C:/Users/jkw88/miniconda3/envs/volumequant/python.exe
# 회사 PC: C:/Users/user/miniconda3/envs/volumequant/python.exe

# 라이브러리 설치
pip install finance-datareader pykrx pandas numpy matplotlib seaborn scipy
```

### 스크립트 실행

```bash
# Stage 1: 거래량 임계치 그리드 서치
python main.py

# Stage 2: 가격 필터 분석
python stage2_main.py

# Stage 3-1: 수급 단독 필터 분석
python stage3_step1_main.py

# Stage 3-2: 조합 필터 분석
python stage3_step2_combo_backtest.py

# Stage 3-3: 민감도 분석 및 매집 가설 검증
python stage3_step3_sensitivity.py

# Stage 3-4: 기관 수급 집중도 분석
python stage3_step4_inst_ratio.py

# Stage 4-1: OOS (2025년) 검증
python stage4_oos_validation.py
```

---

## 파일 구조

```
volume-breakout-backtest/
├── data/
│   ├── stock_list.csv                 # 350개 종목 리스트
│   ├── stock_data.csv                 # 원본 OHLCV (gitignore)
│   ├── stock_data_with_indicators.csv # 지표 포함 (gitignore)
│   └── investor_flow_data_v2.csv      # 수급 데이터 (gitignore)
├── results/
│   ├── stage3_step1_baseline_comparison.csv
│   ├── stage3_step2_combo_results.csv
│   ├── stage3_step3_sensitivity.csv   # 민감도 분석 결과
│   ├── stage3_step4_inst_ratio.csv    # 수급 집중도 분석 결과
│   ├── stage4_oos_validation_results.csv  # OOS 검증 결과
│   ├── stage4_yearly_stats.csv        # 연도별 통계
│   └── *.png (시각화)
├── data_loader.py                # 가격/수급 데이터 로더
├── stage2_price_filter.py        # 가격 필터 백테스트
├── stage3_step1_main.py          # 수급 단독 필터 백테스트
├── stage3_step2_combo_backtest.py    # 조합 필터 백테스트
├── stage3_step3_sensitivity.py   # 민감도 분석
├── stage3_step4_inst_ratio.py    # 수급 집중도 분석
├── stage4_oos_validation.py      # OOS (2025년) 검증
└── RESULTS_SUMMARY.md            # 이 문서
```

---

## 주의사항

1. **승률 한계**: 최고 전략도 승률 60% → 분산 투자 필수
2. **시그널 빈도**: 최적 전략은 월 2~3건 → 여러 종목 모니터링 필요
3. **극단적 변동성**: 개별 거래 ±30% 가능 → 리스크 관리 필수
4. **슬리피지 미반영**: 실제 거래 시 슬리피지/수수료로 수익률 감소
5. **백테스팅 한계**: 과거 성과가 미래를 보장하지 않음
6. **Alpha Decay**: 2022→2025 1일 수익률 지속 하락 (3.83%→-0.61%) → **10일 보유 권장**
7. **OOS 시그널 수**: 2025년 시그널 13개로 통계적 신뢰도 제한적

---

## 향후 개선 방향

1. 손절/익절 전략 추가 (트레일링 스탑 등)
2. ~~섹터별, 시가총액별 세분화 분석~~ ✅ Stage 3-3에서 완료
3. ~~금융투자 순매수 금액 임계치 최적화~~ ✅ Stage 3-4 (Inst_Ratio) 완료
4. 실시간 시그널 감지 시스템 구축
5. 슬리피지, 거래비용 반영한 실전 시뮬레이션
6. ~~OOS (Out-of-Sample) 검증~~ ✅ Stage 4-1에서 2025년 검증 완료
7. 전략 조합 포트폴리오 구성 및 리밸런싱 전략

---

**분석 도구**: Python, FinanceDataReader, pykrx, pandas, matplotlib, seaborn
**GitHub**: https://github.com/VolumeQuant/volume-breakout-backtest
